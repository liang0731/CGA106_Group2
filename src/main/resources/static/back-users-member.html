<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, shrink-to-fit=9">
	<meta name="description" content="Gambolthemes">
	<meta name="author" content="Gambolthemes">
	<title>Barren - Simple Online Event Ticketing System</title>

	<!-- Favicon Icon -->
	<link rel="icon" type="image/png" href="images/fav.png">

	<!-- Stylesheets -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
		rel="stylesheet">
	<link href='vendor/unicons-2.0.1/css/unicons.css' rel='stylesheet'>
	<link href="css/style.css" rel="stylesheet">
	<link href="css/vertical-responsive-menu.min.css" rel="stylesheet">
	<link href="css/datepicker.min.css" rel="stylesheet">
	<link href="css/responsive.css" rel="stylesheet">
	<link href="css/night-mode.css" rel="stylesheet">

	<!-- Vendor Stylesheets -->
	<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
	<link href="vendor/OwlCarousel/assets/owl.carousel.css" rel="stylesheet">
	<link href="vendor/OwlCarousel/assets/owl.theme.default.min.css" rel="stylesheet">
	<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="vendor/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<style>
		.member {
			border: 1px solid white;
		}
		.allInput {
			border: 1px solid white;
		}
		.birthday {
			width: 100px;
		}
		.address{
			width: 180px;
		}
		.phone{
			width: 90px;
		}
		.member{
			width: 80px;
		}

		.iconbutton {
			width: 20px;
			height: 20px;
			vertical-align: top;
		}

		.editbutton {
			width: 15px;
			height: 15px;
			margin-top: 3px;
		}
	</style>
</head>

<body class="d-flex flex-column h-100">
	<!-- Invite Team Member Model Start-->
	<!-- <div class="modal fade" id="inviteTeamModal" tabindex="-1" aria-labelledby="inviteTeamModalLabel"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="inviteTeamModalLabel">邀請新成員</h5>
					<button type="button" class="close-model-btn" data-bs-dismiss="modal" aria-label="Close"><i
							class="uil uil-multiply"></i></button>
				</div>
				<div class="modal-body">
					<div class="model-content main-form">
						<div class="form-group mt-30">
							<label class="form-label">姓名</label>
							<input class="form-control h_40" type="text" placeholder="請輸入姓名.." value="">
						</div>
						<div class="form-group mt-30">
							<label class="form-label">帳號</label>
							<input class="form-control h_40" type="text" placeholder="請輸入帳號.." value="">
						</div>
						<div class="form-group mt-30">
							<label class="form-label">E-mail</label>
							<input class="form-control h_40" type="text" placeholder="請輸入email.." value="">
						</div>
						<div class="form-group mt-30">
							<label class="form-label">密碼(預設)</label>
							<input class="form-control h_40" type="text" value="123456" readonly>
						</div>
						<div class="form-group mt-30">
							<label class="form-label">權限指派</label>
							<select class="selectpicker" title="Select Role">
								<option value="1">業務統籌</option>
								<option value="2">商品管理者</option>
								<option value="3">節目管理者</option>
								<option value="4">後台管理者</option>
								<option value="5">客服人員</option>
								<option value="6">驗票人員</option>
								<option value="7">後台使用者</option>
							</select>
						</div>
						<div class="form-group mt-30">
							<div class="d-flex align-items-start">
								<label class="btn-switch m-0 me-3">
									<input type="checkbox" class="" id="bird-discount" value="">
									<span class="checkbox-slider"></span>
								</label>
								<div class="d-flex flex-column">
									<label class="color-black fw-bold mb-0">Send system emails to this team
										member</label>
									<p class="mt-2 fs-14 d-block mb-0">System emails provide information about events
										created, as well as updates to the system.</p>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="co-main-btn min-width btn-hover h_40"
						data-bs-dismiss="modal">Cancel</button>
					<button type="button" class="main-btn min-width btn-hover h_40">Invite</button>
				</div>
			</div>
		</div>
	</div> -->

	<!-- -----------------------------------------以下角色權限使用------------------------------------------------------ -->
	<!-- <div class="modal fade" id="itm" tabindex="-1" aria-labelledby="inviteTeamModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="inviteTeamModalLabel"><b>權限瀏覽</b></h5>
					<button type="button" class="close-model-btn" data-bs-dismiss="modal" aria-label="Close"><i
							class="uil uil-multiply"></i></button>
				</div>
				<div class="modal-body">
					<div class="model-content main-form">
						<div class="form-group mt-30">
							<p class="form-label"><b>目前角色:</b></p>
							<p id="result"></p>
						</div>
						<div class="form-group mt-30">
							<p class="form-label"><b>負責工作:</b></p>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="co-main-btn min-width btn-hover h_40"
						data-bs-dismiss="modal">Cancel</button>
				</div>
			</div>
		</div>
	</div> -->

	<!-- Invite Team Member Model End-->
	<!-- Header Start-->
	<header class="header">
		<div class="header-inner">
			<nav
				class="navbar navbar-expand-lg bg-barren barren-head navbar fixed-top justify-content-sm-start pt-0 pb-0 ps-lg-0 pe-2">
				<div class="container-fluid ps-0">
					<button type="button" id="toggleMenu" class="toggle_menu">
						<i class="fa-solid fa-bars-staggered"></i>
					</button>
					<button id="collapse_menu" class="collapse_menu me-4">
						<i class="fa-solid fa-bars collapse_menu--icon "></i>
						<span class="collapse_menu--label"></span>
					</button>
					<button class="navbar-toggler order-3 ms-2 pe-0" type="button" data-bs-toggle="offcanvas"
						data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
						<span class="navbar-toggler-icon">
							<i class="fa-solid fa-bars"></i>
						</span>
					</button>
					<a class="navbar-brand order-1 order-lg-0 ml-lg-0 ml-2 me-auto" href="index.html">
						<div class="res-main-logo">
							<img src="images/logo-icon.svg" alt="">
						</div>
						<div class="main-logo" id="logo">
							<img src="images/logo.svg" alt="">
							<img class="logo-inverse" src="images/dark-logo.svg" alt="">
						</div>
					</a>
					<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
						aria-labelledby="offcanvasNavbarLabel">
						<div class="offcanvas-header">
							<div class="offcanvas-logo" id="offcanvasNavbarLabel">
								<img src="images/logo-icon.svg" alt="">
							</div>
							<button type="button" class="close-btn" data-bs-dismiss="offcanvas" aria-label="Close">
								<i class="fa-solid fa-xmark"></i>
							</button>
						</div>
						<div class="offcanvas-body">
							<div class="offcanvas-top-area">
								<div class="create-bg">
									<a href="create.html" class="offcanvas-create-btn">
										<i class="fa-solid fa-calendar-days"></i>
										<span>Create Event</span>
									</a>
								</div>
							</div>
							<ul class="navbar-nav justify-content-end flex-grow-1 pe_5">
								<li class="nav-item">
									<a class="nav-link" href="back-users-profile.html">
										<i class="fa-solid fa-right-left me-2"></i>使用者管理
									</a>
								</li>
								<!-- <li class="nav-item">
									<a class="nav-link" href="explore_events.html">
										<i class="fa-solid fa-compass me-2"></i>Explore Events
									</a>
								</li> -->
							</ul>
						</div>
						<div class="offcanvas-footer">
							<div class="offcanvas-social">
								<h5>Follow Us</h5>
								<ul class="social-links">
									<li><a href="#" class="social-link"><i class="fab fa-facebook-square"></i></a>
									</li>
									<li><a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
									</li>
									<li><a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
									</li>
									<li><a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
									</li>
									<li><a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="right-header order-2">
						<ul class="align-self-stretch">
							<!-- <li>
								<a href="create.html" class="create-btn btn-hover">
									<i class="fa-solid fa-calendar-days"></i>
									<span>Create Event</span>
								</a>
							</li> -->
							<li class="dropdown account-dropdown order-3">
								<a href="#" class="account-link" role="button" id="accountClick"
									data-bs-auto-close="outside" data-bs-toggle="dropdown" aria-expanded="false">
									<img src="images/profile-imgs/img-13.jpg" alt="">
									<i class="fas fa-caret-down arrow-icon"></i>
								</a>
								<ul class="dropdown-menu dropdown-menu-account dropdown-menu-end"
									aria-labelledby="accountClick">
									<li>
										<div class="dropdown-account-header">
											<div class="account-holder-avatar">
												<img src="images/profile-imgs/img-13.jpg" alt="">
											</div>
											<h5>John Doe</h5>
											<p>johndoe@example.com</p>
										</div>
									</li>
									<li class="profile-link">
										<!-- <a href="back-users-profile.html" class="link-item">我的帳戶</a> -->
										<a href="front-users-mem-sign-in.html" class="link-item">登出</a>
									</li>
								</ul>
							</li>
							<li>
								<div class="night_mode_switch__btn">
									<div id="night-mode" class="fas fa-moon fa-sun"></div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</nav>
			<div class="overlay"></div>
		</div>
	</header>
	<!-- Header End-->
	<!-- Left Sidebar Start -->
	<nav class="vertical_nav">
		<div class="left_section menu_left" id="js-menu">
			<div class="left_section">
				<ul>
					<li class="menu--item">
						<a href="back-users-host.html" class="menu--link" title="Members"
							data-bs-toggle="tooltip" data-bs-placement="right">
							<!--class="active" 就是點選menu後按鈕呈現深色背景的狀態-->
							<i class="fa-solid fa-square-plus menu--icon"></i>
							<span class="menu--label">主辦單位管理</span>
						</a>
					</li>
					<li class="menu--item">
						<a href="back-users-member.html" class="menu--link  active" title="Members"
							data-bs-toggle="tooltip" data-bs-placement="right">
							<!--class="active" 就是點選menu後按鈕呈現深色背景的狀態-->
							<i class="fa-solid fa-user-group menu--icon"></i>
							<span class="menu--label">會員資訊管理</span>
						</a>
					</li>
					<li class="menu--item">
						<a href="back-users-my-team.html" class="menu--link team-lock" title="My Team"
							data-bs-toggle="tooltip" data-bs-placement="right">
							<i class="fa-solid fa-user-group menu--icon"></i>
							<span class="menu--label">後台帳號管理</span>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- Left Sidebar End -->
	<!-- Body Start -->
	<div class="wrapper wrapper-body">
		<div class="dashboard-body">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-12">
						<div class="d-main-title">
							<h3><i class="fa-solid fa-user-group me-3"></i>會員資訊管理</h3>
						</div>
					</div>
					<div class="col-md-12">
						<div class="conversion-setup">
							<div class="main-card mt-5">
								<div class="dashboard-wrap-content p-4">
									<div class="d-md-flex flex-wrap align-items-center">
										<!-- <div class="nav custom2-tabs btn-group" role="tablist">
											<button class="tab-link ms-0 active" data-bs-toggle="tab"
												data-bs-target="#overview-tab" type="button" role="tab"
												aria-controls="overview-tab" aria-selected="true">後台使用者</button>
											<button class="tab-link" data-bs-toggle="tab" data-bs-target="#role-tab"
												type="button" role="tab" aria-controls="role-tab"
												aria-selected="false">權限設定</button>
										</div> -->
										<div class="col-lg-3 col-md-6" style="width: 100px; ">
											<select class="selectpicker selectValue">
												<option value="1">啟用中</option>
												<option value="2">停用中</option>
												<option value="0">未驗證</option>
											</select>
										</div>
										<div style="width: 50px; margin-left: 550px;">
											<div class="form-group">
												<div class="relative-input position-relative">
													<input class="form-control h_40" type="text" placeholder="搜尋會員..."
														value="">
													<i class="uil uil-search"></i>
												</div>
											</div>
										</div>
										<!-- <div class="rs ms-auto mt_r4">
											<button class="main-btn btn-hover h_40 w-100" data-bs-toggle="modal"
												data-bs-target="#inviteTeamModal">新增後台使用者</button>
										</div> -->

									</div>

								</div>


							</div>
							<div class="tab-content">
								<div class="tab-pane fade active show" id="overview-tab" role="tabpanel">
									<div class="table-card mt-4">
										<div class="main-table">
											<div class="table-responsive">
												<table class="table">
													<thead class="thead-dark">
														<tr>
															<th scope="col">姓名</th>
															<th scope="col">Email帳號</th>
															<th scope="col">生日</th>
															<th scope="col">性別</th>
															<th scope="col">聯絡電話</th>
															<th scope="col">地址</th>
															<th scope="col">編輯</th>
															<th scope="col">停權</th>
														</tr>
													</thead>
													<tbody>
														<tr>
															<!-- 標格內容 -->
														</tr>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Body End -->

	<script src="js/vertical-responsive-menu.min.js"></script>
	<script src="js/jquery-3.6.0.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script src="vendor/OwlCarousel/owl.carousel.js"></script>
	<script src="vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
	<script src="js/custom.js"></script>
	<script src="js/datepicker.min.js"></script>
	<script src="js/i18n/datepicker.en.js"></script>
	<script src="js/night-mode.js"></script>

</body>
<script>
	const selectElement = document.querySelector('.selectValue');
	fetch('./back-users-member/ga')
		.then(response => response.json())
		.then(data => {
			const table = document.querySelector('.table tbody');
    		data.forEach(member =>{
				const tr =document.createElement("tr");
				function showMember(){
					const option = selectElement.options[selectElement.selectedIndex];
					const selectValue = option.value;    //選單的value
					console.log(selectValue);
					if(selectValue === `${member.memberstatus}`){
						tr.innerHTML =`
							<td><input type="text" name="mname" class="member" id="${member.memberno}" value="${member.mname}"></td>
							<td><input name="memail" class="email allInput" id="${member.memberno}-email" value="${member.memail}" readonly></td>
							<td><input type="date" class="birth allInput" name="birth" id="${member.memberno}-birth" value="${member.birth}" readonly></td>
							<td>
								<select class="allInput" name="gender" id="mySelect-${member.memberno}" disabled>
									<option value="0" ${member.gender === 0 ? "selected" : ""}>不便透露</option>
									<option value="1" ${member.gender === 1 ? "selected" : ""}>男</option>
									<option value="2" ${member.gender === 2 ? "selected" : ""}>女</option>
								</select>

							</td>
							<td><input name="mcell" class="phone allInput" id="${member.mcell}" value="${member.mcell}" readonly></td>
							<td><input name="address" class="address allInput" id="${member.memberno}-address" value="${member.address}" readonly></td>
							<td><input type="image" id="edit-${member.memberno}" class="editbutton" img src="images/edit.png"></td>
							<td><span class="action-btn "><i class="fa-solid fa-lock"></i></span></td>
							`;
						table.appendChild(tr);
						//↓以下為編輯功能按鈕製作
						const editbutton =document.querySelector(`#edit-${member.memberno}`);
						const memail =document.getElementById(`${member.memberno}-email`);
						const birth =document.getElementById(`${member.memberno}-birth`);
						const gender =document.getElementById(`mySelect-${member.memberno}`);
						const mcell =document.getElementById(`${member.mcell}`);
						const address =document.getElementById(`${member.memberno}-address`);
						editbutton.addEventListener("click",() => {
							if(gender.disabled){
								gender.disabled = false;
								memail.removeAttribute("readonly");
								memail.className="email";
								birth.removeAttribute("readonly");
								birth.className="birth";
								mcell.removeAttribute("readonly");
								mcell.className="phone";
								address.removeAttribute("readonly");
								address.className="address";
							}else{
								gender.disabled = true;
								memail.setAttribute("readonly","readonly");
								memail.className="allInput email";
								birth.setAttribute("readonly","readonly");
								birth.className="allInput birth";
								mcell.setAttribute("readonly","readonly");
								mcell.className="allInput phone";
								address.setAttribute("readonly","readonly");
								address.className="allInput address";
							}

						})

						//以下為權限功能按鈕製作
					}

				}

				showMember();
				selectElement.addEventListener("change" , () => {
					tr.remove();
					showMember();
				})
			})
		}).catch(error => console.error(error));
</script>

</html>